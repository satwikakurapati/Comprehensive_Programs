package Comprehensive;

import org.openqa.selenium.*;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.ui.*;
import java.time.Duration;

public class FlightBooking {

    static WebDriver driver;
    static WebDriverWait wait;

    public static void openBrowser(String url) {
        driver = new ChromeDriver();
        driver.manage().window().maximize();
        driver.get(url);
        wait = new WebDriverWait(driver, Duration.ofSeconds(10));
    }

    public static void clickJS(By locator) {
        WebElement element = wait.until(ExpectedConditions.visibilityOfElementLocated(locator));
        ((JavascriptExecutor) driver).executeScript("arguments[0].click();", element);
    }

    public static void enterValue(By locator, String value) {
        WebElement element = wait.until(ExpectedConditions.visibilityOfElementLocated(locator));
        element.clear();
        element.sendKeys(value);
    }

    public static void waitTime(int seconds) throws InterruptedException {
        Thread.sleep(seconds * 1000);
    }

    public static void close() {
        driver.quit();
    }

    public static void main(String[] args) throws InterruptedException {

        openBrowser("https://www.makemytrip.com/");
        waitTime(4);

        driver.findElement(By.tagName("body")).click();
        ((JavascriptExecutor) driver).executeScript("window.scrollTo(0,0);");

        By flights = By.xpath("//span[text()='Flights']");
        By oneWay = By.xpath("//li[@data-cy='oneWayTrip']");
        By fromLabel = By.xpath("//label[@for='fromCity']");
        By fromInput = By.xpath("//input[@placeholder='From']");
        By fromSelect = By.xpath("//p[contains(text(),'Chennai')]");
        By toLabel = By.xpath("//label[@for='toCity']");
        By toInput = By.xpath("//input[@placeholder='To']");
        By toSelect = By.xpath("//p[contains(text(),'Mumbai')]");

        clickJS(flights);
        clickJS(oneWay);

        clickJS(fromLabel);
        enterValue(fromInput, "Chennai");
        waitTime(2);
        clickJS(fromSelect);

        clickJS(toLabel);
        enterValue(toInput, "Hyderabad");
        waitTime(2);
        clickJS(toSelect);

        System.out.println("Flights OneWay - FROM and TO entered successfully");
        System.out.println("----------------------");

        waitTime(3);
//        close();
    }
}

